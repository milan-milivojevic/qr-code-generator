<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>BITZER - QR Code Generator</title>
    <!-- Main App CSS -->
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <!-- Vue JS -->
    <script th:src="@{/js/vue.global.prod.js}"></script>
    <script th:src="@{js/commons.js}"></script>
    <style>
        .qr-code-container {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .attribute-field {
            margin-bottom: 10px;
        }
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>
</head>
<body>

<div id="app">
    <div v-for="qrCode in qrCodes" :key="qrCode.id" class="qr-code-container">
        <h3>{{ qrCode.name }}</h3>
        <div v-for="attr in qrCode.attributeValues" :key="attr.attributeName" class="attribute-field">
            <label :for="attr.attributeName">{{ attr.attributeName }}</label>
            <input :id="attr.attributeName" type="text" v-model="attr.value" />
        </div>
    </div>
</div>

<!-- Vue.js App -->
<script th:inline="javascript">
    /*<![CDATA[*/
    let qrCodes = [];
    try {
        qrCodes = [[${qrCodes}]];
        console.log(qrCodes)
    } catch (e) {
        console.log("Model variables not found", e);
    }
    /*]]>*/
    const app = Vue.createApp({
        data() {
            console.log("Vue app initialized with:", qrCodes);
            return {
                qrCodes: qrCodes || []
            };
        },
        mounted() {
            console.log("Vue app mounted, qrCodes:", this.qrCodes);
            console.log(MESSAGE);
        }
    });

    app.mount("#app");
</script>
</body>
</html>
